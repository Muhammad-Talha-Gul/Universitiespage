(()=>{function h(n,t){n.style.display=t?"":"none"}function o(){[u.className,u.dataset.spinner]=[u.dataset.spinner,u.className]}function c(){const t=formToObject(f);o();ajax.post(e,t,i=>{const r=JSON.parse(i);if(r.success){const i={country:n&&n.country?n.country:t.country,subject:t.subject||"",qualification:t.qualification||"",transaction_id:r.transaction_id};location.href=`${location.origin}/thankyou/?${objectToQueryString(i)}`}else r.errors.limited&&alert("Too many request from your browser, Please wait for a while and continue"),h(s,r.errors.phone_number),o()})}function l(){const u=()=>updatePrefix(t,r);i&&populateCountrySelect(i);t&&(populateCountrySelect(t,!0),t.onchange=u);var o={};n&&n.institution_id&&(o.institution_id=n.institution_id);n&&n.session_country?(t.value=n.session_country,i&&(i.value=n.session_nationality)):ajax.get(e,o,n=>{var r=JSON.parse(n);t&&r.country_code&&(t.value=r.country_code.toLowerCase(),u());i&&r.nationality&&(i.value=r.nationality.toLowerCase())});f.addEventListener("submit",n=>{n.preventDefault();const t=libphonenumber.isValidNumber(r.value);if(!t)return r.setCustomValidity(r.dataset.error),!1;c()});r.onchange=()=>r.setCustomValidity("")}var n=n||null;const e=location.origin+"/api/institution-enquiry/",f=document.getElementById("EnquiryForm"),i=document.getElementById("id_nationality"),t=document.getElementById("id_country"),r=document.getElementById("id_phone_number"),s=document.getElementById("err_phone_number"),u=f.querySelector("[data-spinner]");document.addEventListener("DOMContentLoaded",l)})();