function initSelect(n){n.value=urlQuery.get(n.name);n.value||(n.value="");toggleResetBtn(n)}function updateSubjectOptions(n,t){const u=`qualification_id=${n}&institution_id=${t}`,i=new XMLHttpRequest,f=n=>n.readyState==XMLHttpRequest.DONE,e=n=>n.status==200,r=n=>`<option value="${n[0]}">${n[1]}</option>`;i.onreadystatechange=function(){if(f(i)&&e(i)){let n=JSON.parse(i.responseText),t=n.subjects.map(r).join();FilterSubj.innerHTML=r(["",""])+t}};i.open("POST","/api/populate-subject-data/");i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.setRequestHeader("X-CSRFToken",csrftoken);i.send(u)}const FilterForm=document.getElementById("filter-form"),FilterSubj=FilterForm.filter_subject,FilterQual=FilterForm.filter_qualification,institution=FilterQual.dataset.institution,csrftoken=FilterForm.csrfmiddlewaretoken.value,C_CLS="c-select-resetBtn",urlQuery=new URLSearchParams(location.search),toggleResetBtn=n=>n.parentElement.classList.toggle(C_CLS,n.value);initSelect(FilterQual);initSelect(FilterSubj);FilterQual.onchange=()=>{toggleResetBtn(FilterQual),institution&&updateSubjectOptions(FilterQual.value,institution)};FilterSubj.onchange=()=>{toggleResetBtn(FilterSubj)};FilterForm.onclick=n=>{var t=n.target;t.classList.contains(C_CLS)&&(t.querySelector("select").value="",t.classList.remove(C_CLS),FilterForm.submit(),FilterForm.filters.disabled=!0)};FilterForm.onchange=()=>{FilterForm.submit(),FilterForm.filters.disabled=!0};